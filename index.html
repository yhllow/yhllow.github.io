<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹´åŒ–æ”¶ç›Šç‡è®¡ç®—å™¨</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/decimal.js@10.6.0/decimal.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        .header-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .calculator-wrapper {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0;
        }
        
        @media (min-width: 992px) {
            .calculator-wrapper {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .input-section {
            padding: 35px;
            background: #f8fafc;
        }
        
        .result-section {
            padding: 35px;
            background: white;
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: #2c3e50;
            padding-bottom: 15px;
            border-bottom: 2px solid #e8ecef;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            font-size: 1.2rem;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-label .unit {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #4b6cb7;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.15);
        }
        
        .form-input-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .date-group {
            display: flex;
            gap: 10px;
        }
        
        .date-group input {
            flex: 1;
        }
        
        .calc-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(75, 108, 183, 0.3);
        }
        
        /* ç»“æœå¡ç‰‡æ ·å¼ */
        .result-main {
            background: linear-gradient(135deg, #f8fafc 0%, #e8ecef 100%);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .result-title {
            font-size: 1.2rem;
            color: #5a6c7d;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .result-value {
            font-size: 3.2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .result-subtitle {
            color: #7f8c8d;
            font-size: 1rem;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .result-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e8ecef;
        }
        
        .card-title {
            font-size: 0.95rem;
            color: #5a6c7d;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .card-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .card-unit {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        /* æ”¶ç›Šå¯¹æ¯”æ ·å¼ */
        .comparison-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }
        
        .comparison-title {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .comparison-item {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .comparison-label {
            font-size: 0.95rem;
            color: #5a6c7d;
            margin-bottom: 8px;
        }
        
        .comparison-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .progress-item {
            margin-bottom: 20px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95rem;
            color: #5a6c7d;
        }
        
        .progress-bar {
            height: 10px;
            background: #e8ecef;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4b6cb7, #182848);
            border-radius: 5px;
            transition: width 1s ease-out;
        }
        
        /* æ•°å€¼é¢œè‰² */
        .positive {
            color: #27ae60;
        }
        
        .negative {
            color: #e74c3c;
        }
        
        .neutral {
            color: #7f8c8d;
        }
        
        /* ä¿¡æ¯æç¤º */
        .info-text {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 8px;
        }
        
        .error-message {
            background: #fee;
            color: #e74c3c;
            padding: 12px 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #e74c3c;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .result-value {
                font-size: 2.5rem;
            }
            
            .card-value {
                font-size: 1.5rem;
            }
            
            .comparison-number {
                font-size: 1.5rem;
            }
            
            .input-section, .result-section {
                padding: 25px;
            }
        }
        
        footer {
            text-align: center;
            padding: 25px;
            color: #7f8c8d;
            font-size: 0.9rem;
            border-top: 1px solid #e8ecef;
            margin-top: 20px;
        }
        
        /* è‡ªå®šä¹‰é€‰æ‹©å™¨æ ·å¼ */
        select.form-input {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%237f8c8d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
            padding-right: 45px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <header>
                <div class="header-content">
                    <h1>å¹´åŒ–æ”¶ç›Šç‡è®¡ç®—å™¨</h1>
                    <p class="subtitle">ç²¾ç¡®è®¡ç®—æ‚¨çš„æŠ•èµ„å›æŠ¥ï¼Œæ”¯æŒå•åˆ©/å¤åˆ©è®¡ç®—ï¼Œè‡ªåŠ¨è®¡ç®—æŠ•èµ„æœŸé™ï¼Œæä¾›è¯¦ç»†æ”¶ç›Šåˆ†æ</p>
                </div>
            </header>
            
            <div class="calculator-wrapper">
                <!-- è¾“å…¥åŒºåŸŸ -->
                <section class="input-section">
                    <h2 class="section-title">ğŸ“Š æŠ•èµ„å‚æ•°</h2>
                    
                    <div class="form-group">
                        <div class="form-label">
                            <span>æŠ•èµ„æœ¬é‡‘</span>
                            <span class="unit">å…ƒ</span>
                        </div>
                        <input type="number" class="form-input" v-model="principal" placeholder="è¯·è¾“å…¥æŠ•èµ„æœ¬é‡‘" step="0.01" min="0">
                        <p class="info-text">åˆå§‹æŠ•å…¥çš„èµ„é‡‘é‡‘é¢</p>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">
                            <span>æœ€ç»ˆé‡‘é¢</span>
                            <span class="unit">å…ƒ</span>
                        </div>
                        <input type="number" class="form-input" v-model="finalAmount" placeholder="è¯·è¾“å…¥æœ€ç»ˆé‡‘é¢" step="0.01" min="0">
                        <p class="info-text">æŠ•èµ„åˆ°æœŸåçš„æ€»é‡‘é¢</p>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">
                            <span>æŒä»“æ”¶ç›Š</span>
                            <span class="unit">å…ƒ</span>
                        </div>
                        <input type="number" class="form-input" v-model="profit" placeholder="è¯·è¾“å…¥æŒä»“æ”¶ç›Š" step="0.01">
                        <p class="info-text">æŠ•èµ„æœŸé—´è·å¾—çš„æ€»æ”¶ç›Š</p>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">
                            <span>æŠ•èµ„æœŸé™</span>
                        </div>
                        <div class="form-input-group">
                            <input type="number" class="form-input" v-model="periodValue" placeholder="è¾“å…¥æœŸé™" min="1" step="1">
                            <select class="form-input" v-model="periodUnit">
                                <option value="days">å¤©</option>
                                <option value="months">æœˆ</option>
                                <option value="years">å¹´</option>
                            </select>
                        </div>
                        <p class="info-text">æˆ–é€‰æ‹©ä¹°å…¥æ—¥æœŸè‡ªåŠ¨è®¡ç®—</p>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">
                            <span>ä¹°å…¥æ—¥æœŸ</span>
                        </div>
                        <div class="date-group">
                            <input type="date" class="form-input" v-model="startDate">
                            <button class="calc-btn" @click="calculateFromDate" style="padding: 0 20px; width: auto;">è®¡ç®—å¤©æ•°</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">
                            <span>è®¡ç®—æ–¹å¼</span>
                        </div>
                        <div class="form-input-group">
                            <select class="form-input" v-model="compoundType">
                                <option value="simple">å•åˆ©è®¡ç®—</option>
                                <option value="compound">å¤åˆ©è®¡ç®—</option>
                            </select>
                            <select class="form-input" v-model="compoundFrequency" v-if="compoundType === 'compound'">
                                <option value="daily">æ—¥å¤åˆ©</option>
                                <option value="monthly">æœˆå¤åˆ©</option>
                                <option value="quarterly">å­£å¤åˆ©</option>
                                <option value="yearly">å¹´å¤åˆ©</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="calc-btn" @click="calculate">å¼€å§‹è®¡ç®—</button>
                    
                    <div v-if="error" class="error-message">
                        âš ï¸ {{ error }}
                    </div>
                </section>
                
                <!-- ç»“æœè¾“å‡ºåŒºåŸŸ -->
                <section class="result-section">
                    <h2 class="section-title">ğŸ“ˆ è®¡ç®—ç»“æœ</h2>
                    
                    <!-- ä¸»è¦ç»“æœ -->
                    <div class="result-main">
                        <div class="result-title">å¹´åŒ–æ”¶ç›Šç‡</div>
                        <div class="result-value" :class="getReturnColor(annualizedReturn)">
                            {{ formatNumber(annualizedReturn, 2) }}%
                        </div>
                        <div class="result-subtitle">æ‚¨çš„æŠ•èµ„å¹´åŒ–å›æŠ¥ç‡</div>
                    </div>
                    
                    <!-- å…³é”®æŒ‡æ ‡ç½‘æ ¼ -->
                    <div class="result-grid">
                        <div class="result-card">
                            <div class="card-title">ğŸ’° æŠ•èµ„æœ¬é‡‘</div>
                            <div class="card-value">Â¥{{ formatNumber(principal) }}</div>
                            <div class="card-unit">åˆå§‹æŠ•å…¥èµ„é‡‘</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="card-title">ğŸ“… æŠ•èµ„æœŸé™</div>
                            <div class="card-value">{{ investmentYears.toFixed(2) }}</div>
                            <div class="card-unit">å¹´</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="card-title">ğŸ’¹ æ€»æ”¶ç›Š</div>
                            <div class="card-value" :class="getProfitColor(profit)">
                                {{ profit >= 0 ? '+' : '' }}Â¥{{ formatNumber(profit) }}
                            </div>
                            <div class="card-unit">æŠ•èµ„æœŸé—´æ€»æ”¶ç›Š</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="card-title">ğŸ¦ æœ€ç»ˆé‡‘é¢</div>
                            <div class="card-value">Â¥{{ formatNumber(finalAmount) }}</div>
                            <div class="card-unit">åˆ°æœŸå¯è·å¾—é‡‘é¢</div>
                        </div>
                    </div>
                    
                    <!-- æ”¶ç›Šå¯¹æ¯” -->
                    <div class="comparison-section">
                        <div class="comparison-title">âš–ï¸ æ”¶ç›Šå¯¹æ¯”</div>
                        <div class="comparison-grid">
                            <div class="comparison-item">
                                <div class="comparison-label">å•åˆ©æ€»æ”¶ç›Š</div>
                                <div class="comparison-number" :class="getProfitColor(simpleInterest)">
                                    {{ simpleInterest >= 0 ? '+' : '' }}Â¥{{ formatNumber(simpleInterest) }}
                                </div>
                            </div>
                            
                            <div class="comparison-item">
                                <div class="comparison-label">å¤åˆ©æ€»æ”¶ç›Š</div>
                                <div class="comparison-number" :class="getProfitColor(compoundInterest)">
                                    {{ compoundInterest >= 0 ? '+' : '' }}Â¥{{ formatNumber(compoundInterest) }}
                                </div>
                            </div>
                            
                            <div class="comparison-item">
                                <div class="comparison-label">å•åˆ©å¹´åŒ–æ”¶ç›Š</div>
                                <div class="comparison-number" :class="getReturnColor(simpleAnnualReturn)">
                                    {{ formatNumber(simpleAnnualReturn, 2) }}%
                                </div>
                            </div>
                            
                            <div class="comparison-item">
                                <div class="comparison-label">å¤åˆ©å¹´åŒ–æ”¶ç›Š</div>
                                <div class="comparison-number" :class="getReturnColor(compoundAnnualReturn)">
                                    {{ formatNumber(compoundAnnualReturn, 2) }}%
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ”¶ç›Šæ˜ç»† -->
                    <div class="progress-section">
                        <div class="comparison-title">ğŸ“Š æ”¶ç›Šåˆ†æ</div>
                        
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>æ€»æ”¶ç›Šç‡</span>
                                <span>{{ formatNumber(totalReturnRate, 2) }}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" :style="{ width: Math.min(Math.abs(totalReturnRate), 100) + '%' }"></div>
                            </div>
                        </div>
                        
                        <div class="result-grid" style="margin-top: 20px;">
                            <div class="result-card">
                                <div class="card-title">ğŸ“… æ—¥å‡æ”¶ç›Š</div>
                                <div class="card-value" :class="getProfitColor(dailyProfit)">
                                    {{ dailyProfit >= 0 ? '+' : '' }}Â¥{{ formatNumber(dailyProfit) }}
                                </div>
                                <div class="card-unit">å¹³å‡æ¯å¤©æ”¶ç›Š</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="card-title">ğŸ“ˆ æœˆå‡æ”¶ç›Š</div>
                                <div class="card-value" :class="getProfitColor(monthlyProfit)">
                                    {{ monthlyProfit >= 0 ? '+' : '' }}Â¥{{ formatNumber(monthlyProfit) }}
                                </div>
                                <div class="card-unit">å¹³å‡æ¯æœˆæ”¶ç›Š</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="card-title">ğŸ“‹ æ€»æŠ•èµ„å¤©æ•°</div>
                                <div class="card-value">{{ investmentDays }}</div>
                                <div class="card-unit">å¤©</div>
                            </div>
                            
                            <div class="result-card">
                                <div class="card-title">ğŸ’¼ è®¡ç®—æ–¹å¼</div>
                                <div class="card-value">{{ compoundType === 'simple' ? 'å•åˆ©' : 'å¤åˆ©' }}</div>
                                <div class="card-unit">{{ compoundType === 'compound' ? compoundFrequencyMap[compoundFrequency] : '' }}</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            
            <footer>
                <p>Â© 2025 å¹´åŒ–æ”¶ç›Šç‡è®¡ç®—å™¨ | æ•°æ®ä»…ä¾›å‚è€ƒï¼ŒæŠ•èµ„æœ‰é£é™©ï¼Œå†³ç­–éœ€è°¨æ…</p>
            </footer>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, watch } = Vue;

        createApp({
            setup() {
                // å“åº”å¼æ•°æ®
                const principal = ref(10000);
                const finalAmount = ref(15000);
                const profit = ref(5000);
                const periodValue = ref(365);
                const periodUnit = ref('days');
                const startDate = ref('');
                const compoundType = ref('compound');
                const compoundFrequency = ref('yearly');
                const error = ref('');
                
                // å¤åˆ©é¢‘ç‡æ˜ å°„
                const compoundFrequencyMap = {
                    daily: 'æ—¥å¤åˆ©',
                    monthly: 'æœˆå¤åˆ©',
                    quarterly: 'å­£å¤åˆ©',
                    yearly: 'å¹´å¤åˆ©'
                };
                
                // è®¡ç®—æŠ•èµ„å¤©æ•°
                const investmentDays = computed(() => {
                    if (periodUnit.value === 'days') {
                        return parseFloat(periodValue.value) || 0;
                    } else if (periodUnit.value === 'months') {
                        return (parseFloat(periodValue.value) || 0) * 30;
                    } else {
                        return (parseFloat(periodValue.value) || 0) * 365;
                    }
                });
                
                // è®¡ç®—æŠ•èµ„å¹´æ•°
                const investmentYears = computed(() => {
                    const days = investmentDays.value;
                    return days > 0 ? days / 365 : 0;
                });
                
                // è®¡ç®—å¹´åŒ–æ”¶ç›Šç‡
                const annualizedReturn = computed(() => {
                    const p = parseFloat(principal.value) || 0;
                    const f = parseFloat(finalAmount.value) || 0;
                    const years = investmentYears.value;
                    
                    if (p <= 0 || f <= 0 || years <= 0) {
                        return 0;
                    }
                    
                    if (compoundType.value === 'simple') {
                        // å•åˆ©è®¡ç®—ï¼šå¹´åŒ–æ”¶ç›Šç‡ = (æ€»æ”¶ç›Šç‡) / æŠ•èµ„å¹´æ•°
                        return ((f / p - 1) / years * 100);
                    } else {
                        // å¤åˆ©è®¡ç®—ï¼šå¹´åŒ–æ”¶ç›Šç‡ = ((æœ€ç»ˆé‡‘é¢/æœ¬é‡‘)^(1/æŠ•èµ„å¹´æ•°) - 1) Ã— 100%
                        return (Math.pow(f / p, 1 / years) - 1) * 100;
                    }
                });
                
                // è®¡ç®—æ€»æ”¶ç›Šç‡
                const totalReturnRate = computed(() => {
                    const p = parseFloat(principal.value) || 0;
                    const f = parseFloat(finalAmount.value) || 0;
                    
                    if (p <= 0) return 0;
                    return ((f - p) / p * 100);
                });
                
                // è®¡ç®—æ—¥å‡æ”¶ç›Š
                const dailyProfit = computed(() => {
                    const p = profit.value || 0;
                    const days = investmentDays.value;
                    
                    if (days <= 0) return 0;
                    return p / days;
                });
                
                // è®¡ç®—æœˆå‡æ”¶ç›Š
                const monthlyProfit = computed(() => {
                    const p = profit.value || 0;
                    const years = investmentYears.value;
                    
                    if (years <= 0) return 0;
                    return p / (years * 12);
                });
                
                // è®¡ç®—å•åˆ©æ”¶ç›Š
                const simpleInterest = computed(() => {
                    const p = parseFloat(principal.value) || 0;
                    const years = investmentYears.value;
                    const rate = parseFloat(annualizedReturn.value) / 100 || 0;
                    
                    return p * rate * years;
                });
                
                // è®¡ç®—å¤åˆ©æ”¶ç›Š
                const compoundInterest = computed(() => {
                    const p = parseFloat(principal.value) || 0;
                    const years = investmentYears.value;
                    const rate = parseFloat(annualizedReturn.value) / 100 || 0;
                    
                    return p * Math.pow(1 + rate, years) - p;
                });
                
                // è®¡ç®—å•åˆ©å¹´åŒ–æ”¶ç›Šç‡
                const simpleAnnualReturn = computed(() => {
                    const p = parseFloat(principal.value) || 0;
                    const f = parseFloat(finalAmount.value) || 0;
                    const years = investmentYears.value;
                    
                    if (p <= 0 || f <= 0 || years <= 0) {
                        return 0;
                    }
                    
                    return ((f / p - 1) / years * 100);
                });
                
                // è®¡ç®—å¤åˆ©å¹´åŒ–æ”¶ç›Šç‡
                const compoundAnnualReturn = computed(() => {
                    const p = parseFloat(principal.value) || 0;
                    const f = parseFloat(finalAmount.value) || 0;
                    const years = investmentYears.value;
                    
                    if (p <= 0 || f <= 0 || years <= 0) {
                        return 0;
                    }
                    
                    return (Math.pow(f / p, 1 / years) - 1) * 100;
                });
                
                // æ ¼å¼åŒ–ä¸ºæ•°å­—
                const formatNumber = (num, decimals = 2) => {
                    if (num === undefined || num === null || isNaN(num)) {
                        return '0.00';
                    }
                    
                    const n = parseFloat(num);
                    if (n === 0) return '0.00';
                    
                    return n.toLocaleString('zh-CN', {
                        minimumFractionDigits: decimals,
                        maximumFractionDigits: decimals
                    });
                };
                
                // æ ¹æ®æ—¥æœŸè®¡ç®—æŠ•èµ„å¤©æ•°
                const calculateFromDate = () => {
                    if (!startDate.value) {
                        error.value = 'è¯·é€‰æ‹©ä¹°å…¥æ—¥æœŸ';
                        return;
                    }
                    
                    const start = new Date(startDate.value);
                    const today = new Date();
                    
                    // è®¡ç®—å¤©æ•°å·®
                    const diffTime = Math.abs(today - start);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    periodValue.value = diffDays;
                    periodUnit.value = 'days';
                    error.value = '';
                };
                
                // è®¡ç®—å‡½æ•°
                const calculate = () => {
                    // éªŒè¯è¾“å…¥
                    const p = parseFloat(principal.value);
                    const f = parseFloat(finalAmount.value);
                    
                    if (!p || p <= 0) {
                        error.value = 'è¯·è¾“å…¥æœ‰æ•ˆçš„æŠ•èµ„æœ¬é‡‘ï¼ˆå¤§äº0ï¼‰';
                        return;
                    }
                    
                    if (!f || f <= 0) {
                        error.value = 'è¯·è¾“å…¥æœ‰æ•ˆçš„æœ€ç»ˆé‡‘é¢ï¼ˆå¤§äº0ï¼‰';
                        return;
                    }
                    
                    if (investmentDays.value <= 0) {
                        error.value = 'æŠ•èµ„æœŸé™å¿…é¡»å¤§äº0';
                        return;
                    }
                    
                    error.value = '';
                };
                
                // è·å–æ”¶ç›Šé¢œè‰²
                const getProfitColor = (value) => {
                    const num = parseFloat(value) || 0;
                    return num >= 0 ? 'positive' : 'negative';
                };
                
                // è·å–æ”¶ç›Šç‡é¢œè‰²
                const getReturnColor = (value) => {
                    const num = parseFloat(value) || 0;
                    if (num > 10) return 'positive';
                    if (num > 5) return 'neutral';
                    if (num > 0) return 'positive';
                    if (num < 0) return 'negative';
                    return 'neutral';
                };
                
                // ç›‘å¬æ•°æ®å˜åŒ–ï¼Œè‡ªåŠ¨è®¡ç®—
                watch([principal, finalAmount], ([newPrincipal, newFinalAmount]) => {
                    const p = new Decimal(parseFloat(newPrincipal) || 0);
                    const f = new Decimal(parseFloat(newFinalAmount) || 0);
                    
                    if (p > 0 && f > 0) {
                        profit.value = f.minus(p).toNumber();
                    }
                });
                
                watch([finalAmount, profit], ([newFinalAmount, newProfit]) => {
                    const f = new Decimal(parseFloat(newFinalAmount) || 0);
                    const profitVal = new Decimal(parseFloat(newProfit) || 0);
                    
                    if (f > 0) {
                        principal.value = f.minus(profitVal).toNumber();
                    }
                });

                // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä¸€å¹´å‰
                const setDefaultDate = () => {
                    const oneYearAgo = new Date();
                    oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
                    
                    const year = oneYearAgo.getFullYear();
                    const month = String(oneYearAgo.getMonth() + 1).padStart(2, '0');
                    const day = String(oneYearAgo.getDate()).padStart(2, '0');
                    
                    startDate.value = `${year}-${month}-${day}`;
                };
                
                // åˆå§‹åŒ–é»˜è®¤æ—¥æœŸ
                setDefaultDate();
                
                // åˆå§‹è®¡ç®—
                calculate();
                
                return {
                    principal,
                    finalAmount,
                    profit,
                    periodValue,
                    periodUnit,
                    startDate,
                    compoundType,
                    compoundFrequency,
                    error,
                    investmentDays,
                    investmentYears,
                    annualizedReturn,
                    totalReturnRate,
                    dailyProfit,
                    monthlyProfit,
                    simpleInterest,
                    compoundInterest,
                    simpleAnnualReturn,
                    compoundAnnualReturn,
                    compoundFrequencyMap,
                    formatNumber,
                    calculateFromDate,
                    calculate,
                    getProfitColor,
                    getReturnColor
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
